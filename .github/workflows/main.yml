name: Docker Test

on: [push]

jobs:
  job-vm:
    runs-on: ubuntu-latest
    steps:
      - name: install b2
        run: |
          wget https://github.com/samueldeng/boost_build/releases/download/v1.0/boost_build_centos7.tar.gz
          tar -xzf boost_build_centos7.tar.gz
          rm boost_build_centos7.tar.gz
          export PATH=$PATH:$PWD/boost_build_centos7/bin
          b2 --version
          ls -la .

      - name: Check out repository
        uses: actions/checkout@v2

      - name: Run on VM
        run: |
          ls -la .
          b2
          echo This job does not specify a container.
          echo It runs directly on the virtual machine.
  
  job-container:
    runs-on: ubuntu-latest
    container: centos:7.5.1804
    steps:
      - name: install b2
        run: |
          wget https://github.com/samueldeng/boost_build/releases/download/v1.0/boost_build_centos7.tar.gz
          tar -xzf boost_build_centos7.tar.gz
          rm boost_build_centos7.tar.gz
          export PATH=$PATH:$PWD/boost_build_centos7/bin
          b2 --version
          ls -la .

      - name: Check out repository
        uses: actions/checkout@v2

      - name: Run in container
        run: |
          cat /etc/redhat-release
          ls -la .
          b2

      
